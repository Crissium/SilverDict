(function(){"use strict";var i={7530:function(i,t,e){var a=e(9963),n=e(6252),o=e(3577);const r={class:"container"},s={class:"left-pane"},c={class:"lookup-area"},l=["onClick"],d={class:"history-area"},h={id:"history-heading"},y=(0,n._)("strong",null,"History",-1),m=["onClick"],p={class:"middle-pane"},u=["innerHTML"],f={class:"right-pane"},g={id:"dictionaries-heading"},D=(0,n._)("strong",null,"Dictionaries",-1),_=["onClick"],w={key:0,class:"dialogue"},v=(0,n._)("label",null,[(0,n._)("strong",null,"History Size (⩽ 0 to disable):")],-1),k=(0,n._)("label",null,[(0,n._)("strong",null,"Dictionaries (drag and drop to reorder):")],-1),b=["onDragstart","onDragover","onDrop"],H=["onClick"],C={key:1,class:"dialogue"},S=(0,n._)("label",null,[(0,n._)("strong",null,"Dictionary name")],-1),N=(0,n._)("label",null,[(0,n._)("strong",null,[(0,n.Uk)("File name (path on the server,"),(0,n._)("br"),(0,n.Uk)("e.g. /home/alice/Documents/dictionary.mdx)")])],-1),z=(0,n._)("label",null,[(0,n._)("strong",null,"Format"),(0,n.Uk)(" ")],-1),T=["value"],O={key:2,class:"dialogue"},F={key:3,class:"dialogue"},j=(0,n._)("label",null,[(0,n._)("strong",null,"Dictionary name")],-1);function U(i,t,e,U,E,$){return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",s,[(0,n._)("div",c,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>U.searchTerm=i),placeholder:"Search…",onInput:t[1]||(t[1]=(...i)=>$.searchTermChanged&&$.searchTermChanged(...i)),onKeyup:t[2]||(t[2]=(0,a.D2)((i=>$.search(U.searchTerm)),["enter"]))},null,544),[[a.nr,U.searchTerm]]),(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(U.wordList,(i=>((0,n.wg)(),(0,n.iD)("li",{key:i.fakeID,onClick:t=>$.search(i)},(0,o.zw)(i),9,l)))),128))])]),(0,n._)("div",d,[(0,n._)("p",h,[y,(0,n.Uk)(" ("+(0,o.zw)(U.searchHistory.length)+"/"+(0,o.zw)(U.historySize)+") ",1),(0,n._)("button",{onClick:t[3]||(t[3]=i=>U.searchHistory=[])},"Clear"),(0,n._)("button",{onClick:t[4]||(t[4]=(...i)=>$.getHistory&&$.getHistory(...i))},"Export JSON")]),(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(U.searchHistory,(i=>((0,n.wg)(),(0,n.iD)("li",{key:i,onClick:t=>$.search(i)},(0,o.zw)(i),9,m)))),128))])])]),(0,n._)("div",p,[(0,n._)("div",{innerHTML:U.definition,style:(0,o.j5)({fontSize:U.definitionFontSize+"rem"})},null,12,u),(0,n._)("button",{id:"font-size-increase-button",onClick:t[5]||(t[5]=i=>U.definitionFontSize=Math.min(4,U.definitionFontSize+.1))},"+"),(0,n._)("button",{id:"font-size-decrease-button",onClick:t[6]||(t[6]=i=>U.definitionFontSize=Math.max(.2,U.definitionFontSize-.1))},"-")]),(0,n._)("div",f,[(0,n._)("p",g,[D,(0,n.Uk)("  "),(0,n._)("button",{onClick:t[7]||(t[7]=i=>U.showAddDictionaryDialogue=!U.showAddDictionaryDialogue)},"+"),(0,n._)("button",{onClick:t[8]||(t[8]=i=>U.showSettingsDialogue=!U.showSettingsDialogue)},"Settings")]),(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(U.dictionaries,(i=>((0,n.wg)(),(0,n.iD)("li",{key:i,onClick:t=>$.activeDictionaryChanged(i),class:(0,o.C_)({active:U.activeDictionary["name"]==i["name"]})},(0,o.zw)(i.displayName),11,_)))),128))])]),U.showSettingsDialogue?((0,n.wg)(),(0,n.iD)("div",w,[v,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[9]||(t[9]=i=>U.historySize=i),onInput:t[10]||(t[10]=(...i)=>$.historySizeChanged&&$.historySizeChanged(...i))},null,544),[[a.nr,U.historySize]]),k,(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(U.dictionaries,((i,t)=>((0,n.wg)(),(0,n.iD)("li",{key:i,draggable:"true",onDragstart:i=>$.dragStart(t),onDragover:i=>$.dragOver(t),onDrop:i=>$.drop(t)},[(0,n._)("button",{onClick:t=>{U.editedDictionary=i,U.editedDictionaryDisplayName=i["displayName"]}},"✎",8,H),(0,n.Uk)((0,o.zw)(i.displayName),1)],40,b)))),128))])])):(0,n.kq)("",!0),U.showAddDictionaryDialogue?((0,n.wg)(),(0,n.iD)("div",C,[S,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[11]||(t[11]=i=>U.newDictionaryDisplayName=i)},null,512),[[a.nr,U.newDictionaryDisplayName]]),N,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[12]||(t[12]=i=>U.newDictionaryFilename=i)},null,512),[[a.nr,U.newDictionaryFilename]]),z,(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[13]||(t[13]=i=>U.newDictionaryFormat=i)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(U.dictionaryFormats,(i=>((0,n.wg)(),(0,n.iD)("option",{value:i,key:i},(0,o.zw)(i),9,T)))),128))],512),[[a.bM,U.newDictionaryFormat]]),(0,n.Uk)("  "),(0,n._)("button",{onClick:t[14]||(t[14]=(...i)=>$.addDictionary&&$.addDictionary(...i))},"Add")])):(0,n.kq)("",!0),U.validationError?((0,n.wg)(),(0,n.iD)("div",O,[(0,n._)("p",null,(0,o.zw)(U.validationError),1),(0,n._)("button",{onClick:t[15]||(t[15]=i=>U.validationError="")},"OK")])):(0,n.kq)("",!0),U.editedDictionary["name"]?((0,n.wg)(),(0,n.iD)("div",F,[j,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[16]||(t[16]=i=>U.editedDictionaryDisplayName=i)},null,512),[[a.nr,U.editedDictionaryDisplayName]]),(0,n._)("button",{onClick:t[17]||(t[17]=(...i)=>$.commitNameChange&&$.commitNameChange(...i))},"OK")])):(0,n.kq)("",!0)])}e(7658);var E=e(2262);const $="https://backend-crissium.cloud.okteto.net";var x={name:"DictionaryApp",setup(){const i=(0,E.iH)(""),t=(0,E.iH)(["","","","","","","","","",""]),e=(0,E.iH)([]),a=(0,E.iH)(100),n=(0,E.iH)(""),o=(0,E.iH)({displayName:"display name",name:"en"}),r=(0,E.iH)([]),s=(0,E.iH)(!1),c=(0,E.iH)(!1),l=(0,E.iH)(!1),d=(0,E.iH)([]),h=(0,E.iH)(""),y=(0,E.iH)(""),m=(0,E.iH)(""),p=(0,E.iH)(""),u=(0,E.iH)({}),f=(0,E.iH)(""),g=(0,E.iH)(1);return fetch(`${$}/api/metadata/dictionary_list`).then((i=>i.json())).then((i=>{r.value=i.map((i=>({displayName:i.dictionary_display_name,name:i.dictionary_name,format:i.dictionary_format,filename:i.dictionary_filename})),o.value=i.map((i=>({displayName:i.dictionary_display_name,name:i.dictionary_name})))[0])})),fetch(`${$}/api/metadata/history`).then((i=>i.json())).then((i=>{e.value=i})),fetch(`${$}/api/metadata/history_size`).then((i=>i.json())).then((i=>{a.value=i["history_size"]})),fetch(`${$}/api/metadata/supported_dictionary_formats`).then((i=>i.json())).then((i=>{d.value=i})),window.onload=()=>{document.querySelector("input").focus()},{searchTerm:i,wordList:t,historySize:a,searchHistory:e,definition:n,activeDictionary:o,dictionaries:r,showSettingsDialogue:s,lookupCrossRefHandled:c,showAddDictionaryDialogue:l,dictionaryFormats:d,newDictionaryDisplayName:h,newDictionaryFilename:y,newDictionaryFormat:m,validationError:p,editedDictionary:u,editedDictionaryDisplayName:f,definitionFontSize:g}},methods:{async searchTermChanged(){0===this.searchTerm.length?this.wordList=Array(10).fill(""):await fetch(`${$}/api/metadata/entry_list/${this.activeDictionary.name}/${this.searchTerm}`).then((i=>i.json())).then((i=>{this.wordList=i}))},async search(i){if(0===i.length)return;this.searchTerm=i,this.searchTermChanged();const t=document.querySelectorAll("script");t.forEach((i=>{i.remove()}));const e=await fetch(`${$}/api/lookup/${this.activeDictionary.name}/${i}`);this.definition=await e.text().then((i=>{const t=[...i.matchAll(/<script.*?src=["'](.*?)["']/gi)],e=t.map((i=>i[1]));return 0!==e.length&&e.forEach((i=>{const t=document.createElement("script");t.src=i,document.body.appendChild(t)})),i})),this.searchHistory.includes(i)&&this.searchHistory.splice(this.searchHistory.indexOf(i),1),this.searchHistory.unshift(i)>this.historySize&&this.searchHistory.pop(),await fetch(`${$}/api/metadata/history`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.searchHistory)}),this.lookupCrossRefHandled||(document.addEventListener("click",(i=>{if(i.target.matches("a")){const t=i.target.getAttribute("href");if(t&&t.startsWith("/api/lookup")){i.preventDefault();const e=t.split("/").pop().split("#")[0];this.searchTerm=e,this.search(e)}}})),this.lookupCrossRefHandled=!0)},activeDictionaryChanged(i){this.activeDictionary=i,this.searchTermChanged(),0!==this.definition.length&&this.search(this.searchTerm)},async historySizeChanged(){let i=!1;this.historySize<0&&(this.historySize=0,i=!0),this.searchHistory.length>this.historySize&&(this.searchHistory.splice(this.historySize),i=!0),await fetch(`${$}/api/metadata/history_size`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({history_size:this.historySize})}),i&&await fetch(`${$}/api/metadata/history`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.searchHistory)})},getHistory(){const i=new Blob([JSON.stringify(this.searchHistory)],{type:"application/json"}),t=document.createElement("a");t.href=URL.createObjectURL(i),t.download="history.json",t.click(),URL.revokeObjectURL(i)},dragStart(i){this.draggedIndex=i},dragOver(i){event.preventDefault(),event.target.classList.add("drag-over")},async drop(i){event.preventDefault(),event.target.classList.remove("drag-over");const t=this.dictionaries[this.draggedIndex];this.dictionaries.splice(this.draggedIndex,1),this.dictionaries.splice(i,0,t),await fetch(`${$}/api/metadata/dictionary_list`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.dictionaries.map((i=>({dictionary_display_name:i.displayName,dictionary_name:i.name,dictionary_format:i.format,dictionary_filename:i.filename}))))})},async addDictionary(){0!==this.newDictionaryDisplayName.length?0!==this.newDictionaryFilename.length?-1!==this.dictionaryFormats.indexOf(this.newDictionaryFormat)?await fetch(`${$}/api/metadata/validator/dictionary_info`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dictionary_display_name:this.newDictionaryDisplayName,dictionary_name:this.newDictionaryFilename.split("/").pop().split(".")[0],dictionary_format:this.newDictionaryFormat,dictionary_filename:this.newDictionaryFilename})}).then((i=>i.json())).then((i=>{i["valid"]?(this.dictionaries.push({displayName:this.newDictionaryDisplayName,name:this.newDictionaryFilename.split("/").pop().split(".")[0],format:this.newDictionaryFormat,filename:this.newDictionaryFilename}),this.newDictionaryDisplayName="",this.newDictionaryFilename="",this.newDictionaryFormat="",this.showAddDictionaryDialogue=!1,fetch(`${$}/api/metadata/dictionary_list`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.dictionaries.map((i=>({dictionary_display_name:i.displayName,dictionary_name:i.name,dictionary_format:i.format,dictionary_filename:i.filename}))))})):this.validationError="Dictionary info is rejected by the server."})):this.validationError="Invalid dictionary format.":this.validationError="File name cannot be empty.":this.validationError="Dictionary name cannot be empty."},async commitNameChange(){0!==this.editedDictionaryDisplayName.length?(this.editedDictionary.displayName=this.editedDictionaryDisplayName,this.editedDictionary={},this.editedDictionaryDisplayName="",await fetch(`${$}/api/metadata/dictionary_list`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.dictionaries.map((i=>({dictionary_display_name:i.displayName,dictionary_name:i.name,dictionary_format:i.format,dictionary_filename:i.filename}))))})):this.validationError="Dictionary name cannot be empty."},async deleteDictionary(i){await fetch(`${$}/api/metadata/dictionary_list`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({dictionary_display_name:i.displayName,dictionary_name:i.name,dictionary_format:i.format,dictionary_filename:i.filename})}),this.dictionaries.splice(this.dictionaries.indexOf(i),1)}}},L=e(3744);const A=(0,L.Z)(x,[["render",U]]);var J=A;const P=(0,a.ri)(J);P.mount("#app")}},t={};function e(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return i[a].call(o.exports,o,o.exports,e),o.exports}e.m=i,function(){var i=[];e.O=function(t,a,n,o){if(!a){var r=1/0;for(d=0;d<i.length;d++){a=i[d][0],n=i[d][1],o=i[d][2];for(var s=!0,c=0;c<a.length;c++)(!1&o||r>=o)&&Object.keys(e.O).every((function(i){return e.O[i](a[c])}))?a.splice(c--,1):(s=!1,o<r&&(r=o));if(s){i.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=i.length;d>0&&i[d-1][2]>o;d--)i[d]=i[d-1];i[d]=[a,n,o]}}(),function(){e.d=function(i,t){for(var a in t)e.o(t,a)&&!e.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:t[a]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(i){if("object"===typeof window)return window}}()}(),function(){e.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)}}(),function(){var i={143:0};e.O.j=function(t){return 0===i[t]};var t=function(t,a){var n,o,r=a[0],s=a[1],c=a[2],l=0;if(r.some((function(t){return 0!==i[t]}))){for(n in s)e.o(s,n)&&(e.m[n]=s[n]);if(c)var d=c(e)}for(t&&t(a);l<r.length;l++)o=r[l],e.o(i,o)&&i[o]&&i[o][0](),i[o]=0;return e.O(d)},a=self["webpackChunkSilverDict"]=self["webpackChunkSilverDict"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=e.O(void 0,[998],(function(){return e(7530)}));a=e.O(a)})();
//# sourceMappingURL=app.62205cfa.js.map